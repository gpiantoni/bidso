language: python

python:
 - "3.6"

cache: 
 - directories:
   - $HOME/.cache/pip

before_install:
 - git clone -b bep010_ieeg https://github.com/dorahermes/BIDS-examples.git 
 - mv BIDS-examples/ieeg_visual/sub-01/ses-01/ieeg/sub-01_ses-01_acq-corrected_electrodes.tsv BIDS-examples/ieeg_visual/sub-01/ses-01/ieeg/sub-01_ses-01_acq-projected_electrodes.tsv

install: 
 # install requirements
 - pip install nibabel 
 - pip install pytest pytest-cov codecov
 - pip install -e .

script:
    - py.test --cov=bidso tests/

after_success:
 - codecov

notifications:
 email: false

deploy:
 - provider: pypi
   user: $PYPI_USER
   password: $PYPI_PASSWORD
   on:
     tags: true
